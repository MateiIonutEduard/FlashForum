@{
    ViewBag.Title = "Add Category";
}
<script type="text/javascript">
    $(document).ready(function (e) {
        $('[data-toggle="tooltip"]').tooltip();
        $("#data-filter").css("visibility", "hidden");

        if ($("#navbardrop").length) {
            $.ajax({
                url: "/Account/ViewProfile",
                type: "get",
                cache: false,
                success: function (data) {
                    $("#navbardrop").append("<img src='/Account/Show' alt='My Profile' width='32' height='32'>&nbsp; " + data.username);
                    $(".dropdown-menu").append("<a class='dropdown-item' href='#'><span class='fa fa-user' aria-hidden='true'></span>&nbsp; My Profile</a>");

                    if (data.admin)
                        $(".dropdown-menu").append("<a class='dropdown-item' href='/Home/AddCategory'><span class='fa fa-plus' aria-hidden='true'></span>&nbsp; New Category</a>");

                    $(".dropdown-menu").append("<a class='dropdown-item' href='/Account/Logout'><span class='fa fa-sign-out' aria-hidden='true'></span>&nbsp; Sign out</a>");
                },
                async: true
            });
        }

        $("form").submit(function (e) {
            e.preventDefault();

            $.ajax({
                url: '/Home/AddCategory',
                type: 'post',
                cache: false,
                data: {
                    'name': $("#name").val(),
                    'content': $("#content").val() 
                },
                success: function (data) {
                    var success = data.success;

                    if (!success)
                        $(".text-danger").css("visibility", "visible");
                    else
                    {
                        location.href = '/Home/Index';
                        $("#data-filter").css("visibility", "visible");
                    }
                },
                async: true
            });
        });
    });
</script>
<div class="space">
</div>
<div class="wrapper">
    <div class="container-fluid">
        <center><h3 class="text-success">New Category...</h3></center><br>
        <div class="row">
            <div class="col-md-12">
                <form method="post">
                    <div class="form-group">
                        <input type="text" name="CategoryName" id="name" class="form-control" placeholder="Category Name" required>
                        <span class="help-block"></span>
                    </div>
                    <div class="form-group">
                        <textarea name="Description" id="content" placeholder="Description" class="form-control" rows="10" cols="30"></textarea>
                        <span class="help-block"></span>
                    </div>
                    <div class="form-group">
                        <strong class="text-danger" style="visibility: hidden;">Category was created once!</strong>
                    </div>
                    <div class="buttons-group">
                        <input type="submit" class="btn btn-primary" value="Post">
                        <a href="/Home/Index" class='btn btn-info'>Back</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
